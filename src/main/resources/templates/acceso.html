<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Acceso</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-800 flex items-center justify-center overflow-hidden">

<a href="/login" class="z-50 absolute top-6 right-6 bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors shadow-lg">
    Soy Admin
</a>

<div class="relative w-full h-screen flex items-center justify-center">

    <svg class="absolute inset-0 w-full h-full" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <pattern id="bricks" x="0" y="0" width="120" height="60" patternUnits="userSpaceOnUse">
                <rect width="120" height="60" fill="#8B4513"/>
                <rect x="0" y="0" width="58" height="28" fill="#A0522D" stroke="#654321" stroke-width="1"/>
                <rect x="62" y="0" width="58" height="28" fill="#A0522D" stroke="#654321" stroke-width="1"/>
                <rect x="0" y="32" width="58" height="28" fill="#A0522D" stroke="#654321" stroke-width="1"/>
                <rect x="62" y="32" width="58" height="28" fill="#A0522D" stroke="#654321" stroke-width="1"/>
            </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#bricks)"/>
    </svg>

    <div class="relative z-10 flex items-center gap-12">

        <div class="relative">
            <div class="absolute -inset-4 bg-gradient-to-b from-gray-700 to-gray-800 rounded-lg shadow-2xl"></div>

            <div th:classappend="${tieneAcceso} ? 'door-open' : ''"
                 class="relative w-64 h-96 bg-gradient-to-br from-amber-900 to-amber-950 rounded-lg shadow-2xl transition-all duration-1000"
                 style="transform-style: preserve-3d; transform-origin: left center;">

                <div class="absolute inset-4 border-4 border-amber-950 rounded"></div>
                <div class="absolute top-8 left-8 right-8 h-32 border-4 border-amber-950 rounded"></div>
                <div class="absolute bottom-8 left-8 right-8 h-32 border-4 border-amber-950 rounded"></div>

                <div class="absolute right-6 top-1/2 -translate-y-1/2">
                    <div class="w-3 h-12 bg-gradient-to-r from-yellow-600 to-yellow-700 rounded-full shadow-lg"></div>
                    <div class="w-8 h-8 bg-gradient-to-br from-yellow-600 to-yellow-700 rounded-full -mt-2 -ml-2.5 shadow-lg"></div>
                </div>

                <div class="absolute right-8 top-1/2 translate-y-4">
                    <div class="w-4 h-6 bg-gradient-to-br from-gray-700 to-gray-900 rounded shadow-inner"></div>
                </div>
            </div>

            <div class="absolute -top-8 left-1/2 -translate-x-1/2 flex items-center gap-2">
                <div th:classappend="${tieneAcceso} ? 'bg-green-500' : 'bg-red-500'"
                     class="w-4 h-4 rounded-full shadow-lg animate-pulse"></div>
                <span th:text="${tieneAcceso} ? 'ACCESO PERMITIDO' : 'ACCESO DENEGADO'"
                      class="text-white font-bold text-sm tracking-wider">ACCESO DENEGADO</span>
            </div>
        </div>

        <div th:classappend="${tieneAcceso} ? 'bg-green-600 border-green-400' : (${tieneAcceso} == false ? 'bg-red-600 border-red-400' : 'bg-gray-700 border-gray-500')"
             class="relative w-72 p-6 rounded-xl shadow-2xl border-4 transition-all duration-500">

            <div class="bg-gray-900 rounded-lg p-4 mb-6 shadow-inner">
                <div class="text-green-400 font-mono text-sm mb-2">SISTEMA DE ACCESO v2.0</div>
                <div class="text-green-400 font-mono text-xs mb-4">━━━━━━━━━━━━━━━━━━━━</div>

                <div th:if="${tieneAcceso} == false" class="text-red-400 font-mono text-sm mb-2 animate-pulse">
                    CDIGO INVÁLIDO
                </div>

                <div th:if="${tieneAcceso}" class="text-green-400 font-mono text-sm mb-2 animate-pulse">
                    ACCESO CONCEDIDO
                </div>

                <div th:if="${tieneAcceso} == null" class="text-green-400 font-mono text-xs">
                    &gt; Ingrese código de acceso
                </div>
            </div>

            <form th:action="@{/validar-acceso}" method="post" class="space-y-4">
                <div>
                    <label for="codigo" class="block text-white text-sm font-semibold mb-2">CÓDIGO DE ACCESO:</label>
                    <input
                            type="text"
                            id="codigo"
                            name="codigoEmpleado"
                            required
                            autofocus
                            class="w-full bg-gray-900 text-green-400 font-mono text-2xl text-center py-3 px-4 rounded-lg border-2 border-gray-600 focus:border-green-400 focus:outline-none tracking-widest"
                            placeholder="****"
                    />
                </div>

                <button
                        type="submit"
                        class="w-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-bold py-3 px-6 rounded-lg transition-colors shadow-lg"
                >
                    VERIFICAR ACCESO
                </button>
            </form>

            <div class="absolute top-4 right-4 flex gap-2">
                <div th:classappend="${tieneAcceso} ? 'bg-green-500' : (${tieneAcceso} == false ? 'bg-red-500' : 'bg-yellow-500')"
                     class="w-3 h-3 rounded-full shadow-lg animate-pulse"></div>
            </div>
        </div>
    </div>
</div>

<style>
    .door-open {
        transform: perspective(1200px) rotateY(-95deg);
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
</style>
</body>
</html>